{% extends "home.html" %}
{% block content %}
<style>
 
</style>

<div class="container">
  <div class="content-box">
    <!-- Título con fondo que coincide con el fondo del contenedor para estética uniforme -->
    <h2>Editar Perfil</h2>

    <!-- Formulario para actualizar datos y avatar -->
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <fieldset>
            <legend>Datos de Usuario</legend>
            {{ user_form.as_p }}
        </fieldset>
        <fieldset>
            <legend>Avatar</legend>
            <!-- Mostrar la imagen del avatar solo si existe -->
            {% if avatar_obj and avatar_obj.image %}
                <img src="{{ avatar_obj.image.url }}" alt="Avatar de {{ user.username }}" width="100" class="avatar-preview">
            {% else %}
                <p>No hay avatar cargado.</p>
            {% endif %}
            {{ avatar_form.as_p }}
        </fieldset>
        <button type="submit" name="update_profile">Actualizar Perfil y Avatar</button>
    </form>

    <hr>

    <!-- Formulario para cambiar contraseña -->
    <form method="post">
        {% csrf_token %}
        <fieldset>
            <legend>Cambiar Contraseña</legend>
            {{ password_form.as_p }}
        </fieldset>
        <button type="submit" name="change_password">Cambiar Contraseña</button>
    </form>
</div>
<a href="{% url 'profile' %}"><button type="button">Volver al Perfil</button></a>
{% endblock %}
